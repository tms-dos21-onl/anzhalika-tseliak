Выполнение с помощью VMware Fusion на Ubuntu

Распределить основные сетевые протоколы (перечислены ниже) по уровням модели TCP/IP:
-
- UDP
- TCP
- FTP
- RTP
- DNS
- ICMP
- HTTP
- NTP
- SSH

*Application Layer(Прикладной)*           
>FTP(File Transfer Protocol) -протокол отвечающий за передачу данных между двумя системами.  

>RTP(Real-time Transport Protocol)  -определяет стандарт пакетов для передачи данных(аудио и видео).

>DNS(Domain Name System) -система, которая помогает браузерам находить адреса сайтов по их именам.

>HTTP(HyperText Transfer Protocol) -набор правил, по которым данные в интернете передаются между компьютерами и серверами.  

>SSH (Secure Shell) -протокол прикладного уровня, позволяющий производить удалённое управление операционной системой и туннелирование TCP-соединений.

*Transport Layer(Транспортный)*           
>UDP(User Datagram Protocol) -протокол для передачи сообщений (датаграмм) другим хостам без проверки ошибок и их исправления(«заточен» на скорость)  

>TCP(Transmission Control Protocol) -протокол для контроля передачи информации и ее целостности

*Network Layer(Сетевой межсетевой)*          
>ICMP(Internet Control Message Protocol) -протокол,который помогает определить может ли достичь пакет адреса назначения в установленные временные рамки.

>NTP(Network Time Protocol) -протокол,который используется для синхронизации времени между компьютерными системами по сети.

Узнать pid процесса и длительность подключения ssh с помощью утилиты ss
-
pid процесса:

``` bash
ss -ltp | grep ssh #-tlp -показывает TCP-соединения и их процессы
``` 

Длительность подключения:

``` bash
ss -to | grep keepalive #-to -показать TCP-соединения и информацию таймера
```
![](/HW5/assets/2-1.png) 

Закрыть все порты для входящих подключений, кроме ssh
-
Запуск ufw:

``` bash
sudo ufw enable
```

Запретить все входящие подключения:

``` bash
sudo ufw default deny incoming
```

Разрешить входящие SSH-соединения:

``` bash
sudo ufw allow ssh
``` 

Проверить текущий статус и вывести все текущие правила:

``` bash
sudo ufw status verbose 
```
![](/HW5/assets/3-1.png)   

Проверка ssh подключения:
![](/HW5/assets/3-2.png) 

Установить telnetd на VM, зайти на нее с другой VM с помощью telnet и отловить вводимый пароль и вводимые команды при входе c помощью tcpdump
-
Установка telnetd:

``` bash
sudo apt install telnetd -y
```  

Открыть порт 23(по которому работает telnet):

``` bash
sudo ufw allow 23
``` 

Проверка доступных интерфейсов с помощью tcpdump 

``` bash
 tcpdump -D
 ``` 
Захват пакетов через выбранный интерфейс и запись в файл результатов:

``` bash
sudo tcpdump-i ens160 -w./test/results.pcap
 ``` 
>.pcap  -расширение файла связанное в основном с Wireshark(программой, используемой для анализа сетей)

![](/HW5/assets/4-1.png) 


Запуск wireshark:
``` bash
 wireshark
 ``` 

Сортировка по "telnet":
![](/HW5/assets/4-2.png) 

Просмотр понятного вывода:
![](/HW5/assets/4-3.png) 

Пароль:
![](/HW5/assets/4-4.png) 

Команды:
![](/HW5/assets/4-5.png) 

Открыть порт 222/tcp и обеспечить прослушивание порта с помощью netcat, проверить доступность порта 222 с помощью telnet и nmap.
-
Открыть порт:

``` bash
sudo ufw allow 222/tcp
``` 

Прослушивиние netcat:

``` bash
nc -l 222 #-l -режим прослушивания порта
``` 
nmap:
![](/HW5/assets/5-1.png) 

telnet:
![](/HW5/assets/5-2.png) 

